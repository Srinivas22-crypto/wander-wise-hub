import { Injectable } from '@angular/core';
import { TranslateService } from '@ngx-translate/core';
import { BehaviorSubject, Observable } from 'rxjs';

export interface Language {
  code: string;
  name: string;
  flag: string;
}

@Injectable({
  providedIn: 'root'
})
export class TranslationService {
  private currentLanguageSubject = new BehaviorSubject<string>('en');
  public currentLanguage$ = this.currentLanguageSubject.asObservable();

  public readonly supportedLanguages: Language[] = [
    { code: 'en', name: 'English', flag: 'üá∫üá∏' },
    { code: 'es', name: 'Espa√±ol', flag: 'üá™üá∏' },
    { code: 'fr', name: 'Fran√ßais', flag: 'üá´üá∑' },
    { code: 'de', name: 'Deutsch', flag: 'üá©üá™' },
    { code: 'it', name: 'Italiano', flag: 'üáÆüáπ' },
    { code: 'pt', name: 'Portugu√™s', flag: 'üáµüáπ' },
    { code: 'ja', name: 'Êó•Êú¨Ë™û', flag: 'üáØüáµ' },
    { code: 'cn', name: '‰∏≠Êñá', flag: 'üá®üá≥' }
  ];

  constructor(private translate: TranslateService) {
    this.initializeTranslation();
  }

  private initializeTranslation(): void {
    // Set available languages
    this.translate.addLangs(this.supportedLanguages.map(lang => lang.code));
    
    // Set default language
    this.translate.setDefaultLang('en');
    
    // Load translations manually since HTTP loader isn't working
    this.loadTranslations();
    
    // Get saved language or detect browser language
    const savedLanguage = localStorage.getItem('selectedLanguage');
    const browserLanguage = this.translate.getBrowserLang();
    const defaultLanguage = savedLanguage || 
      (browserLanguage && this.supportedLanguages.find(lang => lang.code === browserLanguage) ? browserLanguage : 'en');
    
    this.setLanguage(defaultLanguage);
  }

  private loadTranslations(): void {
    // Load English translations directly
    const enTranslations = {
      "HEADER": {
        "BRAND": "TravelHub",
        "TAGLINE": "Your Journey Starts Here",
        "SEARCH_PLACEHOLDER": "Search destinations, hotels, experiences...",
        "NOTIFICATIONS": "Notifications",
        "MARK_ALL_READ": "Mark all read",
        "NO_NOTIFICATIONS": "No new notifications",
        "LANGUAGE": "Language",
        "THEME": "Theme",
        "PROFILE_SETTINGS": "Profile Settings",
        "MY_BOOKINGS": "My Bookings",
        "FAVORITES": "Favorites",
        "LOGOUT": "Logout",
        "SIGN_IN": "Sign In",
        "REGISTER": "Register"
      },
      "NAVIGATION": {
        "HOME": "Home",
        "EXPLORE": "Explore",
        "DESTINATIONS": "Destinations",
        "EXPERIENCES": "Experiences",
        "TRAVEL_GUIDES": "Travel Guides",
        "BOOK": "Book",
        "FLIGHTS": "Flights",
        "HOTELS": "Hotels",
        "CAR_RENTAL": "Car Rental",
        "COMMUNITY": "Community"
      },
      "HOME": {
        "HERO_TITLE": "Discover Your Next",
        "HERO_SUBTITLE": "Adventure",
        "HERO_DESCRIPTION": "Explore amazing destinations, book incredible experiences, and connect with fellow travelers around the world.",
        "START_JOURNEY": "Start Your Journey",
        "COMMUNITY": "Community"
      },
      "NOTIFICATIONS": {
        "FLIGHT_BOOKING_CONFIRMED": "Flight Booking Confirmed",
        "FLIGHT_BOOKING_MESSAGE": "Your flight to Paris has been confirmed for March 15th, 2024",
        "CHECK_IN_REMINDER": "Check-in Reminder",
        "CHECK_IN_MESSAGE": "Don't forget to check-in online for your flight tomorrow",
        "SPECIAL_HOTEL_DEAL": "Special Hotel Deal",
        "HOTEL_DEAL_MESSAGE": "30% off luxury hotels in Rome - Limited time offer!"
      }
    };

    // Set translations for English
    this.translate.setTranslation('en', enTranslations);
    
    // Load other language translations
    this.loadSpanishTranslations();
    this.loadFrenchTranslations();
    this.loadGermanTranslations();
    this.loadItalianTranslations();
    this.loadPortugueseTranslations();
    this.loadJapaneseTranslations();
    this.loadChineseTranslations();
  }

  private loadSpanishTranslations(): void {
    const esTranslations = {
      "HEADER": {
        "BRAND": "TravelHub",
        "TAGLINE": "Tu Viaje Comienza Aqu√≠",
        "SEARCH_PLACEHOLDER": "Buscar destinos, hoteles, experiencias...",
        "NOTIFICATIONS": "Notificaciones",
        "MARK_ALL_READ": "Marcar todo como le√≠do",
        "NO_NOTIFICATIONS": "No hay notificaciones nuevas",
        "LANGUAGE": "Idioma",
        "THEME": "Tema",
        "PROFILE_SETTINGS": "Configuraci√≥n del Perfil",
        "MY_BOOKINGS": "Mis Reservas",
        "FAVORITES": "Favoritos",
        "LOGOUT": "Cerrar Sesi√≥n",
        "SIGN_IN": "Iniciar Sesi√≥n",
        "REGISTER": "Registrarse"
      },
      "NAVIGATION": {
        "HOME": "Inicio",
        "EXPLORE": "Explorar",
        "DESTINATIONS": "Destinos",
        "EXPERIENCES": "Experiencias",
        "TRAVEL_GUIDES": "Gu√≠as de Viaje",
        "BOOK": "Reservar",
        "FLIGHTS": "Vuelos",
        "HOTELS": "Hoteles",
        "CAR_RENTAL": "Alquiler de Coches",
        "COMMUNITY": "Comunidad"
      },
      "HOME": {
        "HERO_TITLE": "Descubre Tu Pr√≥xima",
        "HERO_SUBTITLE": "Aventura",
        "HERO_DESCRIPTION": "Explora destinos incre√≠bles, reserva experiencias √∫nicas y conecta con otros viajeros alrededor del mundo.",
        "START_JOURNEY": "Comienza Tu Viaje",
        "COMMUNITY": "Comunidad"
      },
      "NOTIFICATIONS": {
        "FLIGHT_BOOKING_CONFIRMED": "Reserva de Vuelo Confirmada",
        "FLIGHT_BOOKING_MESSAGE": "Tu vuelo a Par√≠s ha sido confirmado para el 15 de marzo de 2024",
        "CHECK_IN_REMINDER": "Recordatorio de Check-in",
        "CHECK_IN_MESSAGE": "No olvides hacer el check-in online para tu vuelo de ma√±ana",
        "SPECIAL_HOTEL_DEAL": "Oferta Especial de Hotel",
        "HOTEL_DEAL_MESSAGE": "30% de descuento en hoteles de lujo en Roma - ¬°Oferta por tiempo limitado!"
      }
    };
    this.translate.setTranslation('es', esTranslations);
  }

  private loadFrenchTranslations(): void {
    const frTranslations = {
      "HEADER": {
        "BRAND": "TravelHub",
        "TAGLINE": "Votre Voyage Commence Ici",
        "SEARCH_PLACEHOLDER": "Rechercher destinations, h√¥tels, exp√©riences...",
        "NOTIFICATIONS": "Notifications",
        "MARK_ALL_READ": "Tout marquer comme lu",
        "NO_NOTIFICATIONS": "Aucune nouvelle notification",
        "LANGUAGE": "Langue",
        "THEME": "Th√®me",
        "PROFILE_SETTINGS": "Param√®tres du Profil",
        "MY_BOOKINGS": "Mes R√©servations",
        "FAVORITES": "Favoris",
        "LOGOUT": "D√©connexion",
        "SIGN_IN": "Se Connecter",
        "REGISTER": "S'inscrire"
      },
      "NAVIGATION": {
        "HOME": "Accueil",
        "EXPLORE": "Explorer",
        "DESTINATIONS": "Destinations",
        "EXPERIENCES": "Exp√©riences",
        "TRAVEL_GUIDES": "Guides de Voyage",
        "BOOK": "R√©server",
        "FLIGHTS": "Vols",
        "HOTELS": "H√¥tels",
        "CAR_RENTAL": "Location de Voiture",
        "COMMUNITY": "Communaut√©"
      },
      "HOME": {
        "HERO_TITLE": "D√©couvrez Votre Prochaine",
        "HERO_SUBTITLE": "Aventure",
        "HERO_DESCRIPTION": "Explorez des destinations incroyables, r√©servez des exp√©riences uniques et connectez-vous avec d'autres voyageurs du monde entier.",
        "START_JOURNEY": "Commencez Votre Voyage",
        "COMMUNITY": "Communaut√©"
      },
      "NOTIFICATIONS": {
        "FLIGHT_BOOKING_CONFIRMED": "R√©servation de Vol Confirm√©e",
        "FLIGHT_BOOKING_MESSAGE": "Votre vol pour Paris a √©t√© confirm√© pour le 15 mars 2024",
        "CHECK_IN_REMINDER": "Rappel d'Enregistrement",
        "CHECK_IN_MESSAGE": "N'oubliez pas de vous enregistrer en ligne pour votre vol de demain",
        "SPECIAL_HOTEL_DEAL": "Offre Sp√©ciale H√¥tel",
        "HOTEL_DEAL_MESSAGE": "30% de r√©duction sur les h√¥tels de luxe √† Rome - Offre limit√©e dans le temps!"
      }
    };
    this.translate.setTranslation('fr', frTranslations);
  }

  private loadGermanTranslations(): void {
    const deTranslations = {
      "HEADER": {
        "BRAND": "TravelHub",
        "TAGLINE": "Ihre Reise Beginnt Hier",
        "SEARCH_PLACEHOLDER": "Reiseziele, Hotels, Erlebnisse suchen...",
        "NOTIFICATIONS": "Benachrichtigungen",
        "MARK_ALL_READ": "Alle als gelesen markieren",
        "NO_NOTIFICATIONS": "Keine neuen Benachrichtigungen",
        "LANGUAGE": "Sprache",
        "THEME": "Design",
        "PROFILE_SETTINGS": "Profileinstellungen",
        "MY_BOOKINGS": "Meine Buchungen",
        "FAVORITES": "Favoriten",
        "LOGOUT": "Abmelden",
        "SIGN_IN": "Anmelden",
        "REGISTER": "Registrieren"
      },
      "NAVIGATION": {
        "HOME": "Startseite",
        "EXPLORE": "Entdecken",
        "DESTINATIONS": "Reiseziele",
        "EXPERIENCES": "Erlebnisse",
        "TRAVEL_GUIDES": "Reisef√ºhrer",
        "BOOK": "Buchen",
        "FLIGHTS": "Fl√ºge",
        "HOTELS": "Hotels",
        "CAR_RENTAL": "Mietwagen",
        "COMMUNITY": "Community"
      },
      "HOME": {
        "HERO_TITLE": "Entdecken Sie Ihr N√§chstes",
        "HERO_SUBTITLE": "Abenteuer",
        "HERO_DESCRIPTION": "Erkunden Sie erstaunliche Reiseziele, buchen Sie unglaubliche Erlebnisse und verbinden Sie sich mit Mitreisenden aus aller Welt.",
        "START_JOURNEY": "Beginnen Sie Ihre Reise",
        "COMMUNITY": "Community"
      },
      "NOTIFICATIONS": {
        "FLIGHT_BOOKING_CONFIRMED": "Flugbuchung Best√§tigt",
        "FLIGHT_BOOKING_MESSAGE": "Ihr Flug nach Paris wurde f√ºr den 15. M√§rz 2024 best√§tigt",
        "CHECK_IN_REMINDER": "Check-in Erinnerung",
        "CHECK_IN_MESSAGE": "Vergessen Sie nicht, online f√ºr Ihren morgigen Flug einzuchecken",
        "SPECIAL_HOTEL_DEAL": "Spezielles Hotelangebot",
        "HOTEL_DEAL_MESSAGE": "30% Rabatt auf Luxushotels in Rom - Zeitlich begrenztes Angebot!"
      }
    };
    this.translate.setTranslation('de', deTranslations);
  }

  private loadItalianTranslations(): void {
    const itTranslations = {
      "HEADER": {
        "BRAND": "TravelHub",
        "TAGLINE": "Il Tuo Viaggio Inizia Qui",
        "SEARCH_PLACEHOLDER": "Cerca destinazioni, hotel, esperienze...",
        "NOTIFICATIONS": "Notifiche",
        "MARK_ALL_READ": "Segna tutto come letto",
        "NO_NOTIFICATIONS": "Nessuna nuova notifica",
        "LANGUAGE": "Lingua",
        "THEME": "Tema",
        "PROFILE_SETTINGS": "Impostazioni Profilo",
        "MY_BOOKINGS": "Le Mie Prenotazioni",
        "FAVORITES": "Preferiti",
        "LOGOUT": "Esci",
        "SIGN_IN": "Accedi",
        "REGISTER": "Registrati"
      },
      "NAVIGATION": {
        "HOME": "Home",
        "EXPLORE": "Esplora",
        "DESTINATIONS": "Destinazioni",
        "EXPERIENCES": "Esperienze",
        "TRAVEL_GUIDES": "Guide di Viaggio",
        "BOOK": "Prenota",
        "FLIGHTS": "Voli",
        "HOTELS": "Hotel",
        "CAR_RENTAL": "Noleggio Auto",
        "COMMUNITY": "Comunit√†"
      },
      "HOME": {
        "HERO_TITLE": "Scopri la Tua Prossima",
        "HERO_SUBTITLE": "Avventura",
        "HERO_DESCRIPTION": "Esplora destinazioni incredibili, prenota esperienze uniche e connettiti con altri viaggiatori in tutto il mondo.",
        "START_JOURNEY": "Inizia il Tuo Viaggio",
        "COMMUNITY": "Comunit√†"
      },
      "NOTIFICATIONS": {
        "FLIGHT_BOOKING_CONFIRMED": "Prenotazione Volo Confermata",
        "FLIGHT_BOOKING_MESSAGE": "Il tuo volo per Parigi √® stato confermato per il 15 marzo 2024",
        "CHECK_IN_REMINDER": "Promemoria Check-in",
        "CHECK_IN_MESSAGE": "Non dimenticare di fare il check-in online per il tuo volo di domani",
        "SPECIAL_HOTEL_DEAL": "Offerta Speciale Hotel",
        "HOTEL_DEAL_MESSAGE": "30% di sconto su hotel di lusso a Roma - Offerta a tempo limitato!"
      }
    };
    this.translate.setTranslation('it', itTranslations);
  }

  private loadPortugueseTranslations(): void {
    const ptTranslations = {
      "HEADER": {
        "BRAND": "TravelHub",
        "TAGLINE": "Sua Jornada Come√ßa Aqui",
        "SEARCH_PLACEHOLDER": "Pesquisar destinos, hot√©is, experi√™ncias...",
        "NOTIFICATIONS": "Notifica√ß√µes",
        "MARK_ALL_READ": "Marcar tudo como lido",
        "NO_NOTIFICATIONS": "Nenhuma nova notifica√ß√£o",
        "LANGUAGE": "Idioma",
        "THEME": "Tema",
        "PROFILE_SETTINGS": "Configura√ß√µes do Perfil",
        "MY_BOOKINGS": "Minhas Reservas",
        "FAVORITES": "Favoritos",
        "LOGOUT": "Sair",
        "SIGN_IN": "Entrar",
        "REGISTER": "Registrar"
      },
      "NAVIGATION": {
        "HOME": "In√≠cio",
        "EXPLORE": "Explorar",
        "DESTINATIONS": "Destinos",
        "EXPERIENCES": "Experi√™ncias",
        "TRAVEL_GUIDES": "Guias de Viagem",
        "BOOK": "Reservar",
        "FLIGHTS": "Voos",
        "HOTELS": "Hot√©is",
        "CAR_RENTAL": "Aluguel de Carros",
        "COMMUNITY": "Comunidade"
      },
      "HOME": {
        "HERO_TITLE": "Descubra Sua Pr√≥xima",
        "HERO_SUBTITLE": "Aventura",
        "HERO_DESCRIPTION": "Explore destinos incr√≠veis, reserve experi√™ncias √∫nicas e conecte-se com outros viajantes ao redor do mundo.",
        "START_JOURNEY": "Comece Sua Jornada",
        "COMMUNITY": "Comunidade"
      },
      "NOTIFICATIONS": {
        "FLIGHT_BOOKING_CONFIRMED": "Reserva de Voo Confirmada",
        "FLIGHT_BOOKING_MESSAGE": "Seu voo para Paris foi confirmado para 15 de mar√ßo de 2024",
        "CHECK_IN_REMINDER": "Lembrete de Check-in",
        "CHECK_IN_MESSAGE": "N√£o esque√ßa de fazer o check-in online para seu voo de amanh√£",
        "SPECIAL_HOTEL_DEAL": "Oferta Especial de Hotel",
        "HOTEL_DEAL_MESSAGE": "30% de desconto em hot√©is de luxo em Roma - Oferta por tempo limitado!"
      }
    };
    this.translate.setTranslation('pt', ptTranslations);
  }

  private loadJapaneseTranslations(): void {
    const jaTranslations = {
      "HEADER": {
        "BRAND": "TravelHub",
        "TAGLINE": "„ÅÇ„Å™„Åü„ÅÆÊóÖ„ÅØ„Åì„Åì„Åã„ÇâÂßã„Åæ„Çä„Åæ„Åô",
        "SEARCH_PLACEHOLDER": "ÁõÆÁöÑÂú∞„ÄÅ„Éõ„ÉÜ„É´„ÄÅ‰ΩìÈ®ì„ÇíÊ§úÁ¥¢...",
        "NOTIFICATIONS": "ÈÄöÁü•",
        "MARK_ALL_READ": "„Åô„Åπ„Å¶Êó¢Ë™≠„Å´„Åô„Çã",
        "NO_NOTIFICATIONS": "Êñ∞„Åó„ÅÑÈÄöÁü•„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì",
        "LANGUAGE": "Ë®ÄË™û",
        "THEME": "„ÉÜ„Éº„Éû",
        "PROFILE_SETTINGS": "„Éó„É≠„Éï„Ç£„Éº„É´Ë®≠ÂÆö",
        "MY_BOOKINGS": "„Éû„Ç§‰∫àÁ¥Ñ",
        "FAVORITES": "„ÅäÊ∞ó„Å´ÂÖ•„Çä",
        "LOGOUT": "„É≠„Ç∞„Ç¢„Ç¶„Éà",
        "SIGN_IN": "„Çµ„Ç§„É≥„Ç§„É≥",
        "REGISTER": "ÁôªÈå≤"
      },
      "NAVIGATION": {
        "HOME": "„Éõ„Éº„É†",
        "EXPLORE": "Êé¢Á¥¢",
        "DESTINATIONS": "ÁõÆÁöÑÂú∞",
        "EXPERIENCES": "‰ΩìÈ®ì",
        "TRAVEL_GUIDES": "ÊóÖË°å„Ç¨„Ç§„Éâ",
        "BOOK": "‰∫àÁ¥Ñ",
        "FLIGHTS": "„Éï„É©„Ç§„Éà",
        "HOTELS": "„Éõ„ÉÜ„É´",
        "CAR_RENTAL": "„É¨„É≥„Çø„Ç´„Éº",
        "COMMUNITY": "„Ç≥„Éü„É•„Éã„ÉÜ„Ç£"
      },
      "HOME": {
        "HERO_TITLE": "Ê¨°„ÅÆÊóÖ„ÇíÁô∫Ë¶ã",
        "HERO_SUBTITLE": "„Ç¢„Éâ„Éô„É≥„ÉÅ„É£„Éº",
        "HERO_DESCRIPTION": "Á¥†Êô¥„Çâ„Åó„ÅÑÁõÆÁöÑÂú∞„ÇíÊé¢Á¥¢„Åó„ÄÅ‰ø°„Åò„Çâ„Çå„Å™„ÅÑ‰ΩìÈ®ì„Çí‰∫àÁ¥Ñ„Åó„ÄÅ‰∏ñÁïå‰∏≠„ÅÆ‰ª≤Èñì„ÅÆÊóÖË°åËÄÖ„Å®„Å§„Å™„Åå„Çä„Åæ„Åó„Çá„ÅÜ„ÄÇ",
        "START_JOURNEY": "ÊóÖ„ÇíÂßã„ÇÅ„Çã",
        "COMMUNITY": "„Ç≥„Éü„É•„Éã„ÉÜ„Ç£"
      },
      "NOTIFICATIONS": {
        "FLIGHT_BOOKING_CONFIRMED": "„Éï„É©„Ç§„Éà‰∫àÁ¥ÑÁ¢∫Ë™ç",
        "FLIGHT_BOOKING_MESSAGE": "2024Âπ¥3Êúà15Êó•„ÅÆ„Éë„É™Ë°å„Åç„Éï„É©„Ç§„Éà„ÅåÁ¢∫Ë™ç„Åï„Çå„Åæ„Åó„Åü",
        "CHECK_IN_REMINDER": "„ÉÅ„Çß„ÉÉ„ÇØ„Ç§„É≥ „É™„Éû„Ç§„É≥„ÉÄ„Éº",
        "CHECK_IN_MESSAGE": "ÊòéÊó•„ÅÆ„Éï„É©„Ç§„Éà„ÅÆ„Ç™„É≥„É©„Ç§„É≥„ÉÅ„Çß„ÉÉ„ÇØ„Ç§„É≥„Çí„ÅäÂøò„Çå„Å™„Åè",
        "SPECIAL_HOTEL_DEAL": "ÁâπÂà•„Éõ„ÉÜ„É´ÂèñÂºï",
        "HOTEL_DEAL_MESSAGE": "„É≠„Éº„Éû„ÅÆÈ´òÁ¥ö„Éõ„ÉÜ„É´„Åå30%„Ç™„Éï - ÊúüÈñìÈôêÂÆö„Ç™„Éï„Ç°„ÉºÔºÅ"
      }
    };
    this.translate.setTranslation('ja', jaTranslations);
  }

  private loadChineseTranslations(): void {
    const cnTranslations = {
      "HEADER": {
        "BRAND": "TravelHub",
        "TAGLINE": "ÊÇ®ÁöÑÊóÖÁ®ã‰ªéËøôÈáåÂºÄÂßã",
        "SEARCH_PLACEHOLDER": "ÊêúÁ¥¢ÁõÆÁöÑÂú∞„ÄÅÈÖíÂ∫ó„ÄÅ‰ΩìÈ™å...",
        "NOTIFICATIONS": "ÈÄöÁü•",
        "MARK_ALL_READ": "ÂÖ®ÈÉ®Ê†áËÆ∞‰∏∫Â∑≤ËØª",
        "NO_NOTIFICATIONS": "Ê≤°ÊúâÊñ∞ÈÄöÁü•",
        "LANGUAGE": "ËØ≠Ë®Ä",
        "THEME": "‰∏ªÈ¢ò",
        "PROFILE_SETTINGS": "‰∏™‰∫∫ËµÑÊñôËÆæÁΩÆ",
        "MY_BOOKINGS": "ÊàëÁöÑÈ¢ÑËÆ¢",
        "FAVORITES": "Êî∂ËóèÂ§π",
        "LOGOUT": "ÁôªÂá∫",
        "SIGN_IN": "ÁôªÂΩï",
        "REGISTER": "Ê≥®ÂÜå"
      },
      "NAVIGATION": {
        "HOME": "È¶ñÈ°µ",
        "EXPLORE": "Êé¢Á¥¢",
        "DESTINATIONS": "ÁõÆÁöÑÂú∞",
        "EXPERIENCES": "‰ΩìÈ™å",
        "TRAVEL_GUIDES": "ÊóÖË°åÊåáÂçó",
        "BOOK": "È¢ÑËÆ¢",
        "FLIGHTS": "Ëà™Áè≠",
        "HOTELS": "ÈÖíÂ∫ó",
        "CAR_RENTAL": "ÁßüËΩ¶",
        "COMMUNITY": "Á§æÂå∫"
      },
      "HOME": {
        "HERO_TITLE": "ÂèëÁé∞ÊÇ®ÁöÑ‰∏ã‰∏Ä‰∏™",
        "HERO_SUBTITLE": "ÂÜíÈô©",
        "HERO_DESCRIPTION": "Êé¢Á¥¢‰ª§‰∫∫ÊÉäÂèπÁöÑÁõÆÁöÑÂú∞ÔºåÈ¢ÑËÆ¢ÈöæÂøòÁöÑ‰ΩìÈ™åÔºå‰∏é‰∏ñÁïåÂêÑÂú∞ÁöÑÊóÖË°åËÄÖÂª∫Á´ãËÅîÁ≥ª„ÄÇ",
        "START_JOURNEY": "ÂºÄÂßãÊÇ®ÁöÑÊóÖÁ®ã",
        "COMMUNITY": "Á§æÂå∫"
      },
      "NOTIFICATIONS": {
        "FLIGHT_BOOKING_CONFIRMED": "Ëà™Áè≠È¢ÑËÆ¢Â∑≤Á°ÆËÆ§",
        "FLIGHT_BOOKING_MESSAGE": "ÊÇ®ÂâçÂæÄÂ∑¥ÈªéÁöÑËà™Áè≠Â∑≤Á°ÆËÆ§ÔºåÊó•Êúü‰∏∫2024Âπ¥3Êúà15Êó•",
        "CHECK_IN_REMINDER": "ÂÄºÊú∫ÊèêÈÜí",
        "CHECK_IN_MESSAGE": "Âà´Âøò‰∫Ü‰∏∫ÊòéÂ§©ÁöÑËà™Áè≠Âú®Á∫øÂÄºÊú∫",
        "SPECIAL_HOTEL_DEAL": "ÁâπÂà´ÈÖíÂ∫ó‰ºòÊÉ†",
        "HOTEL_DEAL_MESSAGE": "ÁΩóÈ©¨Ë±™ÂçéÈÖíÂ∫ó7Êäò‰ºòÊÉ† - ÈôêÊó∂‰ºòÊÉ†ÔºÅ"
      }
    };
    this.translate.setTranslation('cn', cnTranslations);
  }

  public setLanguage(languageCode: string): void {
    if (this.supportedLanguages.find(lang => lang.code === languageCode)) {
      this.translate.use(languageCode);
      this.currentLanguageSubject.next(languageCode);
      localStorage.setItem('selectedLanguage', languageCode);
      
      // Update document language attribute for accessibility
      document.documentElement.lang = languageCode;
    }
  }

  public getCurrentLanguage(): string {
    return this.currentLanguageSubject.value;
  }

  public getCurrentLanguageInfo(): Language | undefined {
    return this.supportedLanguages.find(lang => lang.code === this.getCurrentLanguage());
  }

  public getTranslation(key: string, params?: any): Observable<string> {
    return this.translate.get(key, params);
  }

  public getInstantTranslation(key: string, params?: any): string {
    return this.translate.instant(key, params);
  }

  public isLanguageSupported(languageCode: string): boolean {
    return this.supportedLanguages.some(lang => lang.code === languageCode);
  }
}
