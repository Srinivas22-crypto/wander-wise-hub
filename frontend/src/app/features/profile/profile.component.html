<div class="profile-container">
  <!-- Profile Header -->
  <section class="profile-header">
    <div class="header-content">
      <div class="avatar-section">
        <img 
          [src]="(currentUser$ | async)?.avatar || '/assets/default-avatar.png'" 
          [alt]="(currentUser$ | async)?.name" 
          class="profile-avatar"
        />
        <button class="avatar-edit-btn">üì∑</button>
      </div>
      
      <div class="profile-info">
        <h1 class="profile-name">{{ (currentUser$ | async)?.name }}</h1>
        <p class="profile-email">{{ (currentUser$ | async)?.email }}</p>
        <button 
          (click)="toggleEdit()" 
          class="edit-profile-btn"
          [class.cancel]="isEditing"
        >
          {{ isEditing ? 'Cancel' : 'Edit Profile' }}
        </button>
      </div>
    </div>
  </section>

  <!-- Profile Form -->
  <section class="profile-form-section">
    <div class="form-container">
      <!-- Success/Error Messages -->
      <div *ngIf="successMessage" class="success-message">
        <span class="message-icon">‚úÖ</span>
        {{ successMessage }}
      </div>
      
      <div *ngIf="errorMessage" class="error-message">
        <span class="message-icon">‚ö†Ô∏è</span>
        {{ errorMessage }}
      </div>

      <form [formGroup]="profileForm" (ngSubmit)="onSubmit()" class="profile-form">
        <!-- Basic Information -->
        <div class="form-section">
          <h2 class="section-title">Basic Information</h2>
          
          <div class="form-row">
            <div class="form-group">
              <label for="name" class="form-label">Full Name</label>
              <input
                type="text"
                id="name"
                formControlName="name"
                class="form-input"
                [class.error]="getFieldError('name')"
                [readonly]="!isEditing"
              />
              <div *ngIf="getFieldError('name')" class="field-error">
                {{ getFieldError('name') }}
              </div>
            </div>

            <div class="form-group">
              <label for="email" class="form-label">Email Address</label>
              <input
                type="email"
                id="email"
                formControlName="email"
                class="form-input"
                [class.error]="getFieldError('email')"
                [readonly]="!isEditing"
              />
              <div *ngIf="getFieldError('email')" class="field-error">
                {{ getFieldError('email') }}
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="bio" class="form-label">Bio</label>
            <textarea
              id="bio"
              formControlName="bio"
              class="form-textarea"
              rows="3"
              placeholder="Tell us about yourself..."
              [readonly]="!isEditing"
            ></textarea>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="location" class="form-label">Location</label>
              <input
                type="text"
                id="location"
                formControlName="location"
                class="form-input"
                placeholder="City, Country"
                [readonly]="!isEditing"
              />
            </div>

            <div class="form-group">
              <label for="website" class="form-label">Website</label>
              <input
                type="url"
                id="website"
                formControlName="website"
                class="form-input"
                placeholder="https://yourwebsite.com"
                [readonly]="!isEditing"
              />
            </div>
          </div>
        </div>

        <!-- Preferences -->
        <div class="form-section" formGroupName="preferences">
          <h2 class="section-title">Preferences</h2>
          
          <div class="preferences-grid">
            <label class="preference-item">
              <input
                type="checkbox"
                formControlName="newsletter"
                class="preference-checkbox"
                [disabled]="!isEditing"
              />
              <div class="preference-content">
                <span class="preference-title">Newsletter</span>
                <span class="preference-description">Receive travel tips and destination updates</span>
              </div>
            </label>

            <label class="preference-item">
              <input
                type="checkbox"
                formControlName="notifications"
                class="preference-checkbox"
                [disabled]="!isEditing"
              />
              <div class="preference-content">
                <span class="preference-title">Push Notifications</span>
                <span class="preference-description">Get notified about booking updates and messages</span>
              </div>
            </label>

            <label class="preference-item">
              <input
                type="checkbox"
                formControlName="darkMode"
                class="preference-checkbox"
                [disabled]="!isEditing"
              />
              <div class="preference-content">
                <span class="preference-title">Dark Mode</span>
                <span class="preference-description">Use dark theme for better viewing experience</span>
              </div>
            </label>
          </div>
        </div>

        <!-- Form Actions -->
        <div *ngIf="isEditing" class="form-actions">
          <button
            type="button"
            (click)="toggleEdit()"
            class="action-btn secondary"
          >
            Cancel
          </button>
          <button
            type="submit"
            class="action-btn primary"
            [disabled]="isLoading || !profileForm.valid"
            [class.loading]="isLoading"
          >
            <span *ngIf="!isLoading">Save Changes</span>
            <span *ngIf="isLoading" class="loading-text">
              <span class="spinner"></span>
              Saving...
            </span>
          </button>
        </div>
      </form>
    </div>
  </section>

  <!-- Account Actions -->
  <section class="account-actions">
    <div class="actions-container">
      <h2 class="section-title">Account Actions</h2>
      
      <div class="actions-grid">
        <button class="action-card">
          <span class="action-icon">üîí</span>
          <div class="action-content">
            <span class="action-title">Change Password</span>
            <span class="action-description">Update your account password</span>
          </div>
        </button>

        <button class="action-card">
          <span class="action-icon">üì±</span>
          <div class="action-content">
            <span class="action-title">Two-Factor Authentication</span>
            <span class="action-description">Add an extra layer of security</span>
          </div>
        </button>

        <button class="action-card">
          <span class="action-icon">üìÑ</span>
          <div class="action-content">
            <span class="action-title">Download Data</span>
            <span class="action-description">Export your account data</span>
          </div>
        </button>

        <button class="action-card danger">
          <span class="action-icon">üóëÔ∏è</span>
          <div class="action-content">
            <span class="action-title">Delete Account</span>
            <span class="action-description">Permanently delete your account</span>
          </div>
        </button>
      </div>
    </div>
  </section>
</div>
